<!DOCTYPE html>
<html lang="ja_jp" dir="ltr">
	<head>
		<title>作業サポート</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width">
		<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
        <link rel="stylesheet" href="../resources/common/vue_common.css">
		<style>
            .jiaju {position:relative}
            .resources {width:500px;height:400px;border-radius: 10px;position:absolute;top:10px;}
            .furnitureList {width:1000px;position:absolute;top:10px;left:520px}
            .recipe {width:150px;height:40px;margin:5px 0 0 5px;padding-top:10px; border-radius: 5px; background: linear-gradient(#aef5ff 0%, #81b1bf 100%); display:inline-block;text-align: center;line-height: 35px;}
            .checked {background:linear-gradient(#acbb22 0%, #ceed6e 100%)}
		</style>
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<script src="../resources/common/vue_common.js"></script>
		<script type="text/javascript">
            const RECIPE_LIST = ["普通木材类","普通布料类","普通金属类",
                "珍稀木材类","高级布料类","贵重金属类",
                "雕花工艺","印花工艺","印染工艺",
                "绘画工艺","装饰工艺","普通手艺",
                "灵巧手艺","宝石类","闲杂材料一",
                "闲杂材料二","闲杂材料三","陶瓷类"]
            
            const FURNITURE_LIST = [
                {"name":"黑麻垂曼帘", "recipe":"普通木材类,普通布料类,印染工艺", "skillLevel":"10","level":"一级","price":1100},
                {"name":"桦木圆桌", "recipe":"普通木材类,普通手艺", "skillLevel":"10","level":"一级","price":1100},
                {"name":"桦木立柜", "recipe":"普通木材类,普通木材类,普通手艺", "skillLevel":"15","level":"一级","price":1300},
                {"name":"草编地毯", "recipe":"闲杂材料一,普通手艺,灵巧手艺", "skillLevel":"15","level":"一级","price":6700},
                {"name":"漆花竹凳", "recipe":"普通木材类,印花工艺,普通手艺", "skillLevel":"20","level":"一级","price":1500},
                {"name":"榛木床", "recipe":"普通木材类,普通木材类,普通木材类", "skillLevel":"20","level":"一级","price":900},
                {"name":"印花屏风", "recipe":"普通木材类,普通布料类,印花工艺", "skillLevel":"25","level":"一级","price":1100},
                {"name":"文竹", "recipe":"闲杂材料一,闲杂材料二,陶瓷类", "skillLevel":"25","level":"一级","price":3000},
                {"name":"君子兰", "recipe":"装饰工艺,闲杂材料三,陶瓷类", "skillLevel":"30","level":"一级","price":2700},
                {"name":"蝴蝶兰", "recipe":"普通木材类,闲杂材料三,陶瓷类", "skillLevel":"30","level":"一级","price":2300},
                {"name":"水仙", "recipe":"装饰工艺,闲杂材料一,陶瓷类", "skillLevel":"35","level":"一级","price":2700},
                {"name":"仙人掌", "recipe":"闲杂材料二,闲杂材料三,陶瓷类", "skillLevel":"35","level":"一级","price":3000},
                {"name":"银烛台", "recipe":"普通金属类,装饰工艺,普通手艺", "skillLevel":"40","level":"一级","price":1800},
                {"name":"玉瓷画瓶", "recipe":"灵巧手艺,陶瓷类", "skillLevel":"40","level":"一级","price":6000},
                {"name":"踏春图", "recipe":"绘画工艺,普通手艺", "skillLevel":"45","level":"一级","price":2700},
                {"name":"漆花地板", "recipe":"普通木材类,印花工艺 闲杂材料一", "skillLevel":"45","level":"一级","price":1800},
                {"name":"白鹤展翅帘", "recipe":"普通布料类, 珍稀木材类 高级布料类 闲杂材料一", "skillLevel":"50","level":"二级","price":7300},
                {"name":"蓝绸绣花帘", "recipe":"普通木材类,高级布料类,高级布料类", "skillLevel":"50","level":"二级","price":6300},
                {"name":"红木八仙桌", "recipe":"珍稀木材类,珍稀木材类,雕花工艺,普通手艺", "skillLevel":"55","level":"二级","price":8700},
                {"name":"嵌玉虎纹桌", "recipe":"珍稀木材类,雕花工艺,普通手艺,宝石类", "skillLevel":"55","level":"二级","price":10700},
                {"name":"双鱼吉庆柜", "recipe":"普通木材类, 贵重金属类 雕花工艺 灵巧手艺", "skillLevel":"60","level":"二级","price":10300},
                {"name":"彩绘立柜", "recipe":"珍稀木材类,绘画工艺,通手艺,闲杂材料三", "skillLevel":"60","level":"二级","price":6700},
                {"name":"兽皮地毯", "recipe":"装饰工艺,灵巧手艺,闲杂材料三", "skillLevel":"65","level":"二级","price":6700},
                {"name":"麻布地毯", "recipe":"普通布料类,灵巧手艺,闲杂材料二", "skillLevel":"65","level":"二级","price":6300},
                {"name":"桦木靠背椅", "recipe":"普通木材类, 雕花工艺 灵巧手艺 闲杂材料三", "skillLevel":"70","level":"二级","price":8300},
                {"name":"月牙凳", "recipe":"珍稀木材类,绘画工艺,灵巧手艺", "skillLevel":"70","level":"二级","price":10000},
                {"name":"八卦镇邪榻", "recipe":"珍稀木材类,雕花工艺,宝石类,闲杂材料一", "skillLevel":"75","level":"二级","price":11000},
                {"name":"神仙帐", "recipe":"珍稀木材类,印花工艺,灵巧手艺,闲杂材料三", "skillLevel":"75","level":"二级","price":9500},
                {"name":"狮子图屏风", "recipe":"珍稀木材类, 绘画工艺 闲杂材料一", "skillLevel":"80","level":"二级","price":6000},
                {"name":"花鸟图屏风", "recipe":"珍稀木材类,绘画工艺,普通手艺,闲杂材料二", "skillLevel":"80","level":"二级","price":6700},
                {"name":"天山云雪", "recipe":"装饰工艺,灵巧手艺,闲杂材料二,陶瓷类", "skillLevel":"85","level":"二级","price":7700},
                {"name":"龟鹤延年灯", "recipe":"普通金属类,雕花工艺,灵巧手艺", "skillLevel":"85","level":"二级","price":7400},
                {"name":"长信宫灯", "recipe":"普通金属类, 珍稀木材类 灵巧手艺 宝石类", "skillLevel":"90","level":"二级","price":13400},
                {"name":"雕花马桶", "recipe":"普通木材类,雕花工艺,装饰工艺,闲杂材料一", "skillLevel":"90","level":"二级","price":4000},
                {"name":"彩绘花瓶", "recipe":"绘画工艺,闲杂材料三,陶瓷类", "skillLevel":"95","level":"二级","price":4000},
                {"name":"夕阳山水图", "recipe":"高级布料类,绘画工艺,普通手艺,闲杂材料二", "skillLevel":"95","level":"二级","price":6700},
                {"name":"猛虎坐山图", "recipe":"高级布料类,绘画工艺,灵巧手艺", "skillLevel":"100","level":"二级","price":10000},
                {"name":"桦木地板", "recipe":"普通木材类,灵巧手艺,闲杂材料二", "skillLevel":"100","level":"二级","price":6300},
            ]
		</script>
		<script src="https://unpkg.com/vue@2/dist/vue.js"></script>
		<script src="https://unpkg.com/element-ui/lib/index.js"></script>
	</head>
	
	<body>
		<div id="app">
            <div class="jiaju">
                <div class="resources">
                    <template v-for="recipe in recipeList">
                        <div :class="recipeClass(recipe)">
                            {{recipe}}
                        </div>
                    </template>
                </div>
                
                <div class="furnitureList">
                    <div class="filterArea">
                        家具种类:
                        <el-select v-model="selectedRecipe" filterable style="width:150px">
                            <el-option v-for="item in furnitureList" :value="item.recipe" :label="item.name"></el-option>
                        </el-select>
                        &nbsp;家具等级：
                        <el-radio-group v-model="condition.level">
                            <el-radio-button label="一级"></el-radio-button>
                            <el-radio-button label="二级"></el-radio-button>
                        </el-radio-group>
                        &nbsp;&nbsp;技能等级：
                        <el-input v-model="condition.skillLevel" style="width:50px"></el-input>
                        &nbsp;&nbsp;花费
                        <el-input v-model="condition.price" style="width:80px"></el-input>
                    </div>
                    
                    <div style="margin-top:10px">
                        <el-table :data="dataList" border stripe highlight-current-row
                            @current-change="handleCurrentChange"
                            height="500" style="width:770px">
                            <el-table-column prop="name" label="名称" width="150"></el-table-column>
                            <el-table-column prop="recipe" label="配方" width="400"></el-table-column>
                            <el-table-column prop="skillLevel" label="技能等级" width="100"></el-table-column>
                            <el-table-column prop="price" label="花费" width="100"></el-table-column>
                        </el-table>
                    </div>
                </div>
            </div>
		</div>
		
		<script>
		new Vue({
    	    el: '#app',
    	    data: function() {
    	        return { 
                    recipeList : RECIPE_LIST,
                    furnitureList : FURNITURE_LIST,
                    condition : {"level" : "","skillLevel" : "", "price" : ""},
                    selectedRecipe : ""
				}
    	    },
			// 編集用データ
			computed: {
                dataList(){
                    let result = []
                    // 筛选数据
                    $.each(FURNITURE_LIST,(index,item)=>{
                        let addFlag = true
                        if("" !== this.condition.level && item.level !== this.condition.level) {
                            addFlag = false
                        }
                        if("" !== this.condition.skillLevel && parseInt(item.skillLevel) > parseInt(this.condition.skillLevel)) {
                            addFlag = false
                        }
                        if("" !== this.condition.price && parseInt(item.price) > parseInt(this.condition.price)) {
                            addFlag = false
                        }
                        if(addFlag) {
                            result.push(item)
                        }
                    })
                    return result
                }
			},
			// 初期化処理
			mounted() {

			},
			//
			methods: {
                // 高亮家具配方
                recipeClass(recipe) {
                    if(this.selectedRecipe.indexOf(recipe)>=0) {
                        return "cell recipe checked"
                    } else {
                        return "cell recipe"
                    }
                },
                // 取得选择家具的配方
                handleCurrentChange(val){
                    this.selectedRecipe = val.recipe
                }
			}
    	})
		</script>

	</body>
</html>